test_stage_004 ← {
    correct_result ← (16 1)⍴∘⊂0
    correct_result[11;1] ← 1
    ⎕ ← 'correct_result'
    ⎕ ← correct_result
    vs ← (16 1)⍴∘⊂0
    vs[1;1] ← 1
    vs ← ((1)(⊂#.quapl.gates.X)) #.quapl.circuit.stage vs
    ⎕ ← 'vs'
    ⎕ ← vs

    result ← ((1 3)(⊂#.quapl.gates.CNOT)) #.quapl.circuit.stage vs
    ⎕ ← 'result'
    ⎕ ← result 
    'The end vector state is not an equal superposition' ⊢ correct_result Assert result:
    ''

}